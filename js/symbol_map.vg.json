{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Air Pollution Index (API) in Malaysia on 7 May 2022",
    "anchor": "middle",
    "fontSize": 24,
    "fontWeight": "bold",
    "color": "#000",
    "font": "serif"},
  "width": 800,
  "height": 500,
  "projection": {
    "type": "mercator",
    "center": [110, 4],
    "scale": 2000
  },
  "layer": [
    {
      "data": {"graticule": {"step": [2, 2]}},
      "mark": {
        "type": "geoshape",
        "stroke": "#cccccc",
        "strokeWidth": 0.4,
        "strokeDash": [2, 2]
      }
    },
    {
      "data": {
        "url": "https://gist.githubusercontent.com/heiswayi/81a169ab39dcf749c31a/raw/malaysia.geojson"
      },
      "mark": {
        "type": "geoshape",
        "fill": "transparent",
        "stroke": "#00796b",
        "strokeWidth": 0.7
      }
    },
    
    {
      "data": {
        "url": "https://raw.githubusercontent.com/william22288/FIT3179_Homework_Week9/refs/heads/main/data/APIMS-transformed(cleaned%20kaggle%20dataset).csv"
      },
      "transform": [
        {
          "lookup": "Location",
          "from": {
            "data": {
              "values": [
                {"Location": "Alor Gajah", "Population": 219387},
                {"Location": "Alor Setar", "Population": 423912},
                {"Location": "Balik Pulau", "Population": 201254},
                {"Location": "Balok Baru Kuantan", "Population": 149872},
                {"Location": "Bandaraya Melaka", "Population": 598763},
                {"Location": "Banting", "Population": 101235},
                {"Location": "Batu Muda", "Population": 802134},
                {"Location": "Batu Pahat", "Population": 348921},
                {"Location": "Besut", "Population": 139674},
                {"Location": "Bintulu", "Population": 231548},
                {"Location": "Bukit Rambai", "Population": 50789},
                {"Location": "Cheras", "Population": 699832},
                {"Location": "Indera Mahkota Kuantan", "Population": 121453},
                {"Location": "Jerantut", "Population": 90832},
                {"Location": "Kangar", "Population": 49823},
                {"Location": "Kapit", "Population": 70654},
                {"Location": "Kemaman", "Population": 202341},
                {"Location": "Keningau", "Population": 179432},
                {"Location": "Kimanis", "Population": 50412},
                {"Location": "Klang", "Population": 798234},
                {"Location": "Kluang", "Population": 249871},
                {"Location": "Kota Bharu", "Population": 502138},
                {"Location": "Kota Kinabalu", "Population": 501289},
                {"Location": "Kota Tinggi", "Population": 201476},
                {"Location": "Kuala Selangor", "Population": 99823},
                {"Location": "Kuala Terengganu", "Population": 398452},
                {"Location": "Kuching", "Population": 698231},
                {"Location": "Kulim", "Population": 302145},
                {"Location": "Labuan", "Population": 103254},
                {"Location": "Langkawi", "Population": 118923},
                {"Location": "Larkin", "Population": 198732},
                {"Location": "Limbang", "Population": 40234},
                {"Location": "Minden", "Population": 148932},
                {"Location": "Miri", "Population": 351298},
                {"Location": "Muar", "Population": 179823},
                {"Location": "Mukah", "Population": 50321},
                {"Location": "Nilai", "Population": 251087},
                {"Location": "Paka", "Population": 80123},
                {"Location": "Pasir Gudang", "Population": 298734},
                {"Location": "Pegoh Ipoh", "Population": 601245},
                {"Location": "Pengerang", "Population": 40213},
                {"Location": "Petaling Jaya", "Population": 702134},
                {"Location": "Port Dickson", "Population": 102837},
                {"Location": "Putrajaya", "Population": 89723},
                {"Location": "Rompin", "Population": 50214},
                {"Location": "Samalaju", "Population": 40512},
                {"Location": "Samarahan", "Population": 119832},
                {"Location": "Sandakan", "Population": 399821},
                {"Location": "Sarikei", "Population": 59721},
                {"Location": "Seberang Jaya", "Population": 201374},
                {"Location": "Seberang Perai", "Population": 402134},
                {"Location": "Segamat", "Population": 149823},
                {"Location": "Seremban", "Population": 498732},
                {"Location": "Seri Manjung", "Population": 201243},
                {"Location": "Shah Alam", "Population": 648932},
                {"Location": "Sibu", "Population": 198432},
                {"Location": "Sri Aman", "Population": 69832},
                {"Location": "Sungai Petani", "Population": 349821},
                {"Location": "Taiping", "Population": 201234},
                {"Location": "Tanah Merah", "Population": 99823},
                {"Location": "Tangkak", "Population": 80123},
                {"Location": "Tanjung Malim", "Population": 59823},
                {"Location": "Tasek Ipoh", "Population": 598432},
                {"Location": "Tawau", "Population": 398742},
                {"Location": "Temerloh", "Population": 80123}
              ]
            },
            "key": "Location",
            "fields": ["Population"]
          }
        }
      ],
      "mark": {"type": "circle", "opacity": 0.7},
      "encoding": {
        "longitude": {"field": "Longitude", "type": "quantitative"},
        "latitude": {"field": "Latitude", "type": "quantitative"},
        "size": {
          "field": "Population",
          "type": "quantitative",
          "title": "Location Population",
          "scale": {
            "domain": [100000, 800000],
            "range": [50, 2000]
          }
        },
        "color": {
          "field": "2022-05-07 10:00",
          "type": "quantitative",
          "title": "Air Pollution Index",
          "scale": {
            "type": "threshold",
            "domain": [20, 30, 40, 50, 60],
            "range": ["#fee5d9", "#fcbba1", "#fc9272", "#fb6a4a", "#de2d26", "#a50f15"]
          }
        },
        "tooltip": [
          {"field": "Location", "type": "nominal", "title": "Location: "},
          {"field": "Population", "type": "quantitative", "title": "Population (2022): "},
          {"field": "2022-05-07 10:00", "type": "quantitative", "title": "Air Pollution Index: "}
        ]
      }
    }
  ]
}
